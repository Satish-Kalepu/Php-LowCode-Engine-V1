const mysqlq =  { data(){ return { s2_meti_wen_dda: false, s2_eman_meti_wen: "", } }, props: ['datafor', 'rootdata', 'v','datavar', 'vars'], mounted: function(){ if( typeof(this.v) != "object" ){ this.v = []; }else if( "length" in this.v == false ){ this.v = []; } if( this.v.length > 0 ){ if( this.v[0]['v']['t'] == "L" ){ if( typeof(this.v[0]['v']['v']) != "object" ){ this.v[0]['v']['v'] = []; }else if( "length" in this.v[0]['v']['v'] == false ){ this.v[0]['v']['v'] = []; } }else if( "length" in this.v == false ){ this.v = []; } } }, methods: { s2_ooooooohce: function(s2_vvvvvvvvvv){ if( typeof(s2_vvvvvvvvvv)=="object" ){ console.log( JSON.stringify(s2_vvvvvvvvvv,null,4) ); }else{ console.log( s2_vvvvvvvvvv ); } }, s2_metibuswen: function(){ return "f_" + parseInt(Math.random()*1000); }, s2_bbbus_ekam: function( vi ){ this.v[vi]['v'] = { "t":"L", "v": [ { "f": {"t": "T", "v": "field"}, "c": {"t": "T", "v": "=="}, "v": {"t": "T", "v": "value"}, "n": {"t": "T", "v": "and"}, } ] }; }, s2_bus_evomer: function( vi ){ this.v[vi]['v'] = { "t":"T", "v": "" }; }, s2_ttttttidda: function(){ var nv = "and"; if( this.v.length > 0 ){ nv = this.v[0]['n']['v']+''; } this.v.push({ "f": { "t": "T", "v": "field" }, "c": { "t": "T", "v": "==" }, "v": { "t": "T", "v": "value" }, "n": { "t": "T", "v": nv }, }); }, s2_edoneteled: function( k, e ){ if( e.ctrlkey ){ this.v.splice(k,1); }else if( confirm("are you sure?\nctrl+click to avoid prompt") ){ this.v.splice(k,1); } }, getfieldslist: function(){ if( typeof(this.rootdata)=="object" ){ if( 'data' in this.rootdata ){ if( 'schema' in this.rootdata['data'] ){ if( 'fields' in this.rootdata['data']['schema'] ){ return Object.keys(this.rootdata['data']['schema']['fields']['v']).join(","); } } } } return ""; } }, template: `<div> <div>(</div> <div v-if="typeof(v)!='object'||v==undefined||v==null" style="margin-left:30px;">vobject error</div> <div v-else style="margin-left:20px;"> <template v-for="vd,vi in v" > <div style="display:flex; column-gap:10px; margin-bottom:5px;" > <div><input type="button" class="btn btn-outline-danger btn-sm" style="padding:0px 5px;" value="X" v-on:click="s2_edoneteled(vi,$event)" ></div> <template  v-if="vd['v']['t']!='L'" > <div style="align-self:flex-start;"> <div class="btn btn-outline-secondary btn-sm" style="padding:0px 5px;" v-on:click="s2_bbbus_ekam(vi)" title="Create Sub Condition" ><b>.</b></div> </div> <div style="align-self:flex-start;"> <div title="Fields" data-type="dropdown" data-list="list" v-bind:data-list-values="getfieldslist()" v-bind:data-for="datafor" v-bind:data-var="datavar+':'+vi+':f:v'" >{{ vd['f']['v'] }}</div> </div> </template> <template v-if="vd['v']['t']=='L'" > <mysqlq v-if="typeof(vd['v']['v'])=='object'&&'length' in vd['v']['v']" v-bind:v="vd['v']['v']" v-bind:datafor="datafor" v-bind:datavar="datavar+':'+vi+':v:v'" v-bind:vars="vars" v-bind:rootdata="rootdata" ></mysqlq> <div v-else style="align-self:flex-start;"> <div class="btn btn-link btn-sm" style="padding:0px 5px;" v-on:click="s2_bus_evomer(vi)" >Fix Data Type</div> </div> </template> <template v-else-if="vd['v']['t']=='O'" > <div style="align-self:flex-start;"> <div class="btn btn-link btn-sm" style="padding:0px 5px;" v-on:click="s2_bus_evomer(vi)" >Fix Data Type</div> </div> </template> <template v-else> <div style="align-self:flex-start;"> <div class="codeline_thing_pop" data-type="dropdown" data-list="mysqloperator" v-bind:data-for="datafor" v-bind:data-var="datavar+':'+vi+':c:v'" title="SQL Operator" >{{ vd['c']['v'] }}</div> </div> <mysql_field v-bind:v="vd['v']" v-bind:datafor="datafor" v-bind:datavar="datavar+':'+vi+':v'" v-bind:rootdata="rootdata" v-bind:vars="vars" ></mysql_field> </template> </div> <div style=" margin-bottom:5px; " ><div v-if="vi!=((v.length)-1)" class="codeline_thing_pop" data-type="dropdown" v-bind:data-for="datafor" data-list="list" data-list-values="and,or" v-bind:data-var="datavar+':'+vi+':n:v'" >{{ vd['n']['v'] }}</div></div> </template> <div><input class="btn btn-outline-dark btn-sm" style="padding:0px 5px;" type='button' v-on:click="s2_ttttttidda" value='+'></div> </div> <div>)</div> </div>` };